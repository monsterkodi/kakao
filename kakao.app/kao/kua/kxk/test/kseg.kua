
use kxk/kxk
use kxk/strg

â–¸ kseg

    â–¸ static
    
        kseg.rep(4)âˆ™str() â–¸ "    "
        kseg.rep(4 'x')âˆ™str() â–¸ "xxxx"
        kseg.rep(2 'xy')âˆ™str() â–¸ "xyxy"

        kseg.segiAtWidth kseg('')    0 â–¸ 1
        kseg.segiAtWidth kseg('')    1 â–¸ 1
        kseg.segiAtWidth kseg('a')   1 â–¸ 1
        kseg.segiAtWidth kseg('a')   2 â–¸ 2
        kseg.segiAtWidth kseg('abc') 2 â–¸ 2
        kseg.segiAtWidth kseg('ab3') 3 â–¸ 3
        kseg.segiAtWidth kseg('ab3') 4 â–¸ 4
        kseg.segiAtWidth kseg('ab3') 5 â–¸ 4
        kseg.segiAtWidth kseg('ab3') 6 â–¸ 4
        
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 0 â–¸ 1  
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 1 â–¸ 1
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 2 â–¸ 1
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 3 â–¸ 2
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 4 â–¸ 2
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 5 â–¸ 3
        kseg.segiAtWidth kseg('ğŸ§‘ğŸ§‘') 6 â–¸ 3  

    â–¸ segls
            
        lines = kstr.lines"""
            123
            456
            
            abc
            def"""
            
        lines â–¸ ["123" "456" "" "abc" "def"]
            
        segls = kseg.segls """
            123
            456
            
            abc
            def"""
        
        segls â–¸ [kseg("123") kseg("456") kseg("") kseg("abc") kseg("def")]    
        
        kseg.str(segls) â–¸ """
            123
            456
            
            abc
            def""" 
        
    â–¸ construct
        
        s = kseg()
        sâˆ™str()                 â–¸ ""
        s = kseg("  ")
        sâˆ™str()                 â–¸ "  "
        s = kseg(kseg("xx"))
        sâˆ™str()                 â–¸ "xx"
        s = kseg(kseg(kseg("yy")))
        sâˆ™str()                 â–¸ "yy"
        st = strg("zz")
        s = kseg(strg("zz"))
        sâˆ™str()                 â–¸ "zz"
        
    â–¸ startsWith
    
        s = kseg "a  b"
        sâˆ™startsWith "a"        â–¸ true
        sâˆ™startsWith "a "       â–¸ true
        sâˆ™startsWith "a  b"     â–¸ true
        sâˆ™startsWith "a  bc"    â–¸ false
        sâˆ™startsWith "b"        â–¸ false
        
    â–¸ endsWith
    
        s = kseg "a  b"
        sâˆ™endsWith "b"          â–¸ true
        sâˆ™endsWith " b"         â–¸ true
        sâˆ™endsWith "a  b"       â–¸ true
        sâˆ™endsWith " a  b"      â–¸ false
        sâˆ™endsWith "a"          â–¸ false
        
    â–¸ find
        
        s = kseg "a  b"
        sâˆ™find " "              â–¸ 2
        sâˆ™find "  "             â–¸ 2
        sâˆ™find " b"             â–¸ 3
        sâˆ™find "b"              â–¸ 4

    â–¸ pop
    
        s = kseg "../"
        sâˆ™pop()
        sâˆ™str()                 â–¸ ".."
        
        s = kseg "â—‚â–¸â—‹â—"
        sâˆ™pop()
        sâˆ™str()                 â–¸ "â—‚â–¸â—‹"
        sâˆ™pop()                 
        sâˆ™str()                 â–¸ "â—‚â–¸"
        
    â–¸ push
    
        s = kseg()
        s.len                   â–¸ 0
        sâˆ™push "â—"
        sâˆ™str() â–¸ "â—"
        s.len                   â–¸ 1
        sâˆ™push "â–ª"
        sâˆ™str()                 â–¸ "â—â–ª"
        s.len                   â–¸ 2
        sâˆ™push " "
        sâˆ™str()                 â–¸ "â—â–ª "
        s.len                   â–¸ 3
    
    â–¸ rpad
        
        s = kseg "â–´"
        sâˆ™rpad 2
        sâˆ™str()                 â–¸ "â–´ "
        sâˆ™rpad 4
        sâˆ™str()                 â–¸ "â–´   "
        sâˆ™rpad 2
        sâˆ™str()                 â–¸ "â–´   "
        
    â–¸ trim
    
        s = kseg " â–´  "
        sâˆ™trim()
        sâˆ™str()                 â–¸ "â–´"
        
        s = kseg " â–´  "
        sâˆ™rtrim()
        sâˆ™str()                 â–¸ " â–´"

        s = kseg " â–´  "
        sâˆ™ltrim()
        sâˆ™str()                 â–¸ "â–´  "

        s = kseg "\n\n â–´  \n  \n"
        sâˆ™trim()
        sâˆ™str()                 â–¸ "â–´"
        
    â–¸ slice
    
        s = kseg "abc"
        sâˆ™slice(1)âˆ™str()        â–¸ "abc"
        sâˆ™slice(2)âˆ™str()        â–¸ "bc"
        sâˆ™slice(3)âˆ™str()        â–¸ "c"
        sâˆ™slice(4 3)âˆ™str()      â–¸ ""
        sâˆ™slice(4 4)âˆ™str()      â–¸ ""
        sâˆ™slice(4)âˆ™str()        â–¸ ""
        
    â–¸ emojii
    
        s = kseg "ğŸ§‘"
        s.len                   â–¸ 1
        
        s = kseg "ğŸ§‘â€ğŸŒ¾"
        s.len                   â–¸ 3
        s[^1]                   â–¸ "ğŸŒ¾"
        sâˆ™pop()
        sâˆ™pop()
        s.len                   â–¸ 1
        sâˆ™str()                 â–¸ "ğŸ§‘"
        
    â–¸ segiAtWidth
    
        kseg.segiAtWidth kseg("abc") 1  â–¸ 1
        kseg.segiAtWidth kseg("abc") 2  â–¸ 2
        kseg.segiAtWidth kseg("abc") 3  â–¸ 3
        kseg.segiAtWidth kseg("abc") 4  â–¸ 4
                                        
        kseg.segiAtWidth kseg("â–¸â—Œâ—‚") 1  â–¸ 1
        kseg.segiAtWidth kseg("â–¸â—Œâ—‚") 2  â–¸ 2
        kseg.segiAtWidth kseg("â–¸â—Œâ—‚") 3  â–¸ 3
        kseg.segiAtWidth kseg("â–¸â—Œâ—‚") 4  â–¸ 4

        kseg.segiAtWidth "abc" 1        â–¸ 1
        kseg.segiAtWidth "abc" 2        â–¸ 2
        kseg.segiAtWidth "abc" 3        â–¸ 3
        kseg.segiAtWidth "abc" 4        â–¸ 4
                                        
        kseg.segiAtWidth "â–¸â—Œâ—‚" 1        â–¸ 1
        kseg.segiAtWidth "â–¸â—Œâ—‚" 2        â–¸ 2
        kseg.segiAtWidth "â–¸â—Œâ—‚" 3        â–¸ 3
        kseg.segiAtWidth "â–¸â—Œâ—‚" 4        â–¸ 4
        
    â–¸ eql

        kseg("abc") == kseg("abc")  â–¸ false
        
        kseg("abc")âˆ™eql kseg("abc") â–¸ true
        
        kseg.eql "abc" "abc"        â–¸ true
        kseg.eql "abc" kseg("abc")  â–¸ true
        kseg.eql kseg("abc") "abc"  â–¸ true
    
    â–¸ is
    
        a = kseg ""
        aâˆ™is kseg                   â–¸ true
        aâˆ™is array                  â–¸ true
        aâˆ™is table                  â–¸ false
        aâˆ™is false                  â–¸ false
        aâˆ™is true                   â–¸ false
        aâˆ™is nil                    â–¸ false

    â–¸ count
    
        s = kseg "__hellooo"
        s[^1] == "o" â–¸ true
        sâˆ™slice(s.len)âˆ™str() == "o" â–¸ true
        kseg.tailCount s "o" â–¸ 3
        kseg.tailCount "__hellooo" "o" â–¸ 3

        kseg.headCount s "_" â–¸ 2
        kseg.headCount "__hellooo" "_" â–¸ 2

        kseg.tailCount "â—‚â—‚â—‹â—‹â—" "â—" â–¸ 1
        kseg.headCount "â—‚â—‚â—‹â—‹â—" "â—‚" â–¸ 2
        
        kseg.tailCountWord kseg("1  2 33") â–¸ 2
        kseg.tailCountWord kseg("x233 ")   â–¸ 0
        
        kseg.headCountWord kseg("1  2 33") â–¸ 1
        kseg.headCountWord kseg("  2 33")  â–¸ 0
        kseg.headCountWord kseg(".  2 33") â–¸ 0
        kseg.headCountWord kseg("x233")   â–¸ 4
        kseg.headCountWord kseg("x233 ")   â–¸ 4
        
        kseg.tailCount " " ""   â–¸ 0
        kseg.tailCount " " " "  â–¸ 1
        kseg.tailCount "  " " " â–¸ 2
        
        kseg.tailCountChunk kseg("a bc") â–¸ 2
        kseg.tailCountChunk kseg("a b c") â–¸ 1
        kseg.tailCountChunk kseg("a b c  ") â–¸ 0
        kseg.tailCountChunk kseg("abc  ") â–¸ 0
        kseg.tailCountChunk kseg("  ") â–¸ 0

        kseg.headCountChunk kseg("a bc") â–¸ 1
        kseg.headCountChunk kseg("ab c") â–¸ 2
        kseg.headCountChunk kseg(" a b c  ") â–¸ 0
        kseg.headCountChunk kseg("abc  ") â–¸ 3
        kseg.headCountChunk kseg("  ") â–¸ 0
        
    â–¸ spanForClosestWordAtColumn
    
        kseg.spanForClosestWordAtColumn kseg('abc def') 1 â–¸ [1 4]        
        kseg.spanForClosestWordAtColumn kseg('abc def') 2 â–¸ [1 4]        
        kseg.spanForClosestWordAtColumn kseg('abc def') 3 â–¸ [1 4]        
        kseg.spanForClosestWordAtColumn kseg('abc def') 4 â–¸ [5 8]        
        kseg.spanForClosestWordAtColumn kseg('ab  def') 3 â–¸ [1 3]        
        kseg.spanForClosestWordAtColumn kseg('ab  def') 4 â–¸ [5 8]        
        
        kseg.spanForClosestWordAtColumn kseg('     ')   0 â–¸ [0 0]        
        kseg.spanForClosestWordAtColumn kseg('     ')   2 â–¸ [2 2]        
        kseg.spanForClosestWordAtColumn kseg('     ')   3 â–¸ [3 3]
                                                        
        kseg.spanForClosestWordAtColumn kseg('   xy')   2 â–¸ [4 6]        
        kseg.spanForClosestWordAtColumn kseg('xy   ')   3 â–¸ [1 3]        
                                                        
        kseg.spanForClosestWordAtColumn "   aa123   "   1 â–¸ [4 9]
        
        