###
000   000  000   000  000      000   000  00000000     
000  000   000   000  000      000   000  000   000    
0000000    000   000  000      000   000  0000000      
000  000   000   000  000      000   000  000   000    
000   000   0000000   0000000   0000000   000   000    
###

use kxk.kxk
use kxk.kulur

ext     = 'kode'
lang    = l -> ext = l
ranges  = s -> kulur.ranges s ext
dissect = c -> kulur.dissect kstr.lines(c) ext
inc     = rgs start match -> 
    if rgs
        for r in rgs 
            if r.start == start and r.match == match 
                ‚Æê  r.clss
    write ‚óår noon(rgs) "\nexpected " ‚óåg match ‚óår ' at index ' ‚óåb start

‚ñ∏ kulur
        
    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà     ‚ñà‚ñà
    # ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà

    ‚ñ∏ kim
    
        lang 'kim'
        
        rgs = ranges 'if'
        inc rgs 1 'if' ‚ñ∏ 'keyword'

        rgs = ranges '‚óèif'
        inc rgs 1 '‚óè'  ‚ñ∏ 'punct'
        # inc rgs 2 'if' ‚ñ∏ 'text'

    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà     ‚ñà‚ñà
    # ‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà
    
    ‚ñ∏ nim
    
        lang 'nim'
        
        dss = dissect "proc f(str:string)"
        # write "dss" dss
        
        inc dss[1] 1 "proc"   ‚ñ∏ 'keyword'
        inc dss[1] 12 "string" ‚ñ∏ 'keyword type'

    # 000   000   0000000   0000000    00000000  
    # 000  000   000   000  000   000  000       
    # 0000000    000   000  000   000  0000000   
    # 000  000   000   000  000   000  000       
    # 000   000   0000000   0000000    00000000  
    
    ‚ñ∏ kode
    
        lang 'kode'
        
        dss = dissect "a = b -> true"
        inc dss[1] 1 "a"   ‚ñ∏ 'function'
        inc dss[1] 3 "="   ‚ñ∏ 'punct function'
        inc dss[1] 5 "b"   ‚ñ∏ 'function argument'
        inc dss[1] 7 "->"  ‚ñ∏ 'punct function'

        dss = dissect "->"
        inc dss[1] 1 "->"  ‚ñ∏ 'punct function'

        dss = dissect "    -> true"
        inc dss[1] 5 "->"  ‚ñ∏ 'punct function'

        dss = dissect "=>"
        inc dss[1] 1 "=>"  ‚ñ∏ 'punct function bound'

        dss = dissect "    => true"
        inc dss[1] 5 "=>"  ‚ñ∏ 'punct function bound'
        
    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà

    ‚ñ∏ noon
    
        lang 'noon'
            
        rgs = ranges "    property  value"
        inc rgs 5 'property'   ‚ñ∏ 'property'
        inc rgs 15 'value'     ‚ñ∏ 'text'
    
        rgs = ranges "top" 'noon'
        # inc rgs 1 'top'        ‚ñ∏ 'obj'
        inc rgs 1 'top'        ‚ñ∏ 'text'
    
        rgs = ranges "tip top"
        # inc rgs 1 'tip'        ‚ñ∏ 'obj'
        # inc rgs 5 'top'        ‚ñ∏ 'obj'
        
        rgs = ranges "top  prop"
        # inc rgs 1 'top'        ‚ñ∏ 'obj'
        inc rgs 6 'prop'       ‚ñ∏ 'text'
    
        rgs = ranges "version  ^0.1.2"
        # inc rgs 1 'version'    ‚ñ∏ 'obj'
        inc rgs 10 '^'          ‚ñ∏ 'punct semver'
        inc rgs 11 '0'         ‚ñ∏ 'semver'
        
        rgs = ranges "    some-package-name  1"
        inc rgs 5  'some'      ‚ñ∏ 'property'
        inc rgs 10 'package'   ‚ñ∏ 'property'
        inc rgs 18 'name'      ‚ñ∏ 'property'
    
        rgs = ranges "    some-package-name  ^1.2.3"
        inc rgs 5  'some'      ‚ñ∏ 'property'
        inc rgs 10 'package'   ‚ñ∏ 'property'
        inc rgs 18 'name'      ‚ñ∏ 'property'
        
        rgs = ranges "top  prop  value"
        # inc rgs 1  'top'       ‚ñ∏ 'obj'
        inc rgs 6  'prop'      ‚ñ∏ 'property'
        inc rgs 12 'value'     ‚ñ∏ 'text'
        
        rgs = ranges "    http://domain.com"
        inc rgs 5 'http'       ‚ñ∏ 'url protocol'
        inc rgs 9 ':'          ‚ñ∏ 'punct url'
        inc rgs 10 '/'         ‚ñ∏ 'punct url'
        inc rgs 11 '/'         ‚ñ∏ 'punct url'
        inc rgs 12 'domain'    ‚ñ∏ 'url domain'
        inc rgs 18 '.'         ‚ñ∏ 'punct url tld'
        inc rgs 19 'com'       ‚ñ∏ 'url tld'
    
        rgs = ranges "    http://domain.com/dir/page.html"
        inc rgs 5 'http'       ‚ñ∏ 'url protocol'
        inc rgs 9 ':'          ‚ñ∏ 'punct url'
        inc rgs 10 '/'         ‚ñ∏ 'punct url'
        inc rgs 11 '/'         ‚ñ∏ 'punct url'
        inc rgs 12 'domain'    ‚ñ∏ 'url domain'
        inc rgs 18 '.'         ‚ñ∏ 'punct url tld'
        inc rgs 19 'com'       ‚ñ∏ 'url tld'
        # inc rgs 22 '/'         ‚ñ∏ 'punct dir'
        
        rgs = ranges "    file.kode"
        # inc rgs 5  'file'      ‚ñ∏ 'file_kode'
        # inc rgs 9  '.'         ‚ñ∏ 'file_punct_kode'
        # inc rgs 10 'kode'      ‚ñ∏ 'file_ext_kode'
    
        rgs = ranges "    /some/path"
        # inc rgs 6  'some'      ‚ñ∏ 'text dir'
        # inc rgs 10 '/'         ‚ñ∏ 'punct dir'
        # inc rgs 11 'path'      ‚ñ∏ 'text file'
        
        rgs = ranges '    /some\\path/file.txt:10'
        # inc rgs 5  '/'         ‚ñ∏ 'punct dir'
        # inc rgs 6  'some'      ‚ñ∏ 'text dir'
        # inc rgs 10  '\\'       ‚ñ∏ 'punct dir'
        # inc rgs 20 '.'         ‚ñ∏ 'file_punct_txt'
        # inc rgs 24 ':'         ‚ñ∏ 'punct'
        
        rgs = ranges "    test  ./node_modules/.bin/mocha"
        # inc rgs 5 'test'       ‚ñ∏ 'property'
        # inc rgs 11 '.'         ‚ñ∏ 'punct dir'
        # inc rgs 12 '/'         ‚ñ∏ 'punct dir'
        # inc rgs 13 'node_modules' ‚ñ∏ 'text dir'
        # inc rgs 25 '/'         ‚ñ∏ 'punct dir'
        # inc rgs 26 '.'         ‚ñ∏ 'punct dir'
        # inc rgs 27 'bin'       ‚ñ∏ 'text dir'
        # inc rgs 30 '/'         ‚ñ∏ 'punct dir'
        # inc rgs 31 'mocha'     ‚ñ∏ 'text file'
        
        rgs = ranges "c   #999"
        inc rgs 5 "#"   ‚ñ∏ 'punct'
        inc rgs 6 '999' ‚ñ∏ 'number hex'
        
        rgs = ranges "c   #abc"
        inc rgs 5 "#"   ‚ñ∏ 'punct'
        inc rgs 6 'abc' ‚ñ∏ 'number hex'
    
        rgs = ranges "c   #abcdef"
        inc rgs 5 "#"   ‚ñ∏ 'punct'
        inc rgs 6 'abcdef' ‚ñ∏ 'number hex'
    
        ‚ñ∏ comments
        
            rgs = ranges "   # bla blub"
            # inc rgs 4  "#"      ‚ñ∏ 'punct comment'
            # inc rgs 6  "bla"    ‚ñ∏ 'comment'
            # inc rgs 10 "blub"   ‚ñ∏ 'comment'
        
    # 00000000   0000000   000      000      0000000     0000000    0000000  000   000  
    # 000       000   000  000      000      000   000  000   000  000       000  000   
    # 000000    000000000  000      000      0000000    000000000  000       0000000    
    # 000       000   000  000      000      000   000  000   000  000       000  000   
    # 000       000   000  0000000  0000000  0000000    000   000   0000000  000   000  
    
    ‚ñ∏ fallback
    
        lang 'kode'
            
        rgs = ranges 'text' 'unknown'
        inc rgs 1 'text' ‚ñ∏ 'text'
    
        rgs = ranges 'text' 'fish'
        inc rgs 1 'text' ‚ñ∏ 'text'
        
        rgs = ranges ' ###' 'kode' 
        # inc rgs 2 '###' ‚ñ∏ 'punct comment triple'
                
    #  0000000   0000000   00     00  00     00  00000000  000   000  000000000   0000000  
    # 000       000   000  000   000  000   000  000       0000  000     000     000       
    # 000       000   000  000000000  000000000  0000000   000 0 000     000     0000000   
    # 000       000   000  000 0 000  000 0 000  000       000  0000     000          000  
    #  0000000   0000000   000   000  000   000  00000000  000   000     000     0000000   
    
    ‚ñ∏ comments
        
        rgs = ranges "hello # world"
        inc rgs 7 "#"      ‚ñ∏ 'punct comment'
        # inc rgs 9 "world"  ‚ñ∏ 'comment'
                
    ‚ñ∏ triple comment
                
        rgs = ranges "###a###"
        # inc rgs 1 '###'  ‚ñ∏ 'punct comment triple'
        # inc rgs 4 "a"    ‚ñ∏ 'comment triple'
        # inc rgs 5 '###'  ‚ñ∏ 'punct comment triple'
    
        dss = dissect "###\na\n###"
        # inc dss[1] 1 '###'   ‚ñ∏ 'punct comment triple'
        # inc dss[2] 1 'a'     ‚ñ∏ 'comment triple'
        # inc dss[3] 1 '###'   ‚ñ∏ 'punct comment triple'
    
        lang 'styl'
        dss = dissect "/*\na\n*/"
        # inc dss[1] 1 "/"   ‚ñ∏ 'punct comment triple'
        # inc dss[1] 2 "*"   ‚ñ∏ 'punct comment triple'
        # inc dss[2] 1 "a"   ‚ñ∏ 'comment triple'
        # inc dss[3] 1 "*"   ‚ñ∏ 'punct comment triple'
        # inc dss[3] 2 "/"   ‚ñ∏ 'punct comment triple'

    ‚ñ∏ comment header
    
        lang 'kode'
    
        rgs = ranges "# 0 00 0000" 
        inc rgs 1  "#"     ‚ñ∏ 'punct comment'
        inc rgs 3  "0"     ‚ñ∏ 'comment header'
        inc rgs 5  "00"    ‚ñ∏ 'comment header'
        inc rgs 8  "0000"  ‚ñ∏ 'comment header'

        dss = dissect "###\n 0 00 0 \n###"
        # inc dss[2] 2 "0"   ‚ñ∏ 'comment triple header'
        
        rgs = ranges "# 0 * 0.2"
        inc rgs 3 '0'      ‚ñ∏ 'comment'
        inc rgs 7 '0'      ‚ñ∏ 'comment'
        
        dss = dissect "###\n 0 1 0 \n###"
        # inc dss[1] 1 "0"   ‚ñ∏ 'number'
        
        lang 'styl'
        
        rgs = ranges "// 000"
        # inc rgs 4  "000"   ‚ñ∏ 'comment header'
    
        dss = dissect "/*\n 0 0 0 \n*/"
        # inc dss[1] 1 "0"   ‚ñ∏ 'comment triple header'
        
    # 000   000  000   000  00     00  0000000    00000000  00000000    0000000  
    # 0000  000  000   000  000   000  000   000  000       000   000  000       
    # 000 0 000  000   000  000000000  0000000    0000000   0000000    0000000   
    # 000  0000  000   000  000 0 000  000   000  000       000   000       000  
    # 000   000   0000000   000   000  0000000    00000000  000   000  0000000   
    
    ‚ñ∏ numbers
                        
        rgs = ranges "a 6670"
        inc rgs 3 "6670"   ‚ñ∏ 'number'
    
        rgs = ranges "0x667AC"
        inc rgs 1 "0x667AC" ‚ñ∏ 'number hex'
    
        rgs = ranges "66.700"
        inc rgs 1 "66"     ‚ñ∏ 'number float'
        inc rgs 3 "."      ‚ñ∏ 'punct number float'
        inc rgs 4 "700"    ‚ñ∏ 'number float'
    
        rgs = ranges "77.800 -100"
        inc rgs 1 "77"     ‚ñ∏ 'number float'
        inc rgs 9 "100"    ‚ñ∏ 'number'
    
        rgs = ranges "(8.9,100.2)"
        inc rgs 4 "9"      ‚ñ∏ 'number float'
        inc rgs 10 "2"      ‚ñ∏ 'number float'
        
        rgs = ranges "#f00" 
        inc rgs 1 "#"      ‚ñ∏ 'punct number hex'
        inc rgs 2 'f00'    ‚ñ∏ 'number hex'

        lang 'kode'
        
        rgs = ranges "#f00" 
        inc rgs 1 "#"      ‚ñ∏ 'punct comment'
        # inc rgs 2 'f00'    ‚ñ∏ 'comment'

        rgs = ranges "'#f00'" 
        inc rgs 2 "#"      ‚ñ∏ 'string single'
        inc rgs 3 'f00'    ‚ñ∏ 'string single'
         
        rgs = ranges "'#808'" 
        inc rgs 2 "#"      ‚ñ∏ 'string single'
        inc rgs 3 '808'    ‚ñ∏ 'string single'
         
    #  0000000  00000000  00     00  000   000  00000000  00000000   
    # 000       000       000   000  000   000  000       000   000  
    # 0000000   0000000   000000000   000 000   0000000   0000000    
    #      000  000       000 0 000     000     000       000   000  
    # 0000000   00000000  000   000      0      00000000  000   000  
    
    ‚ñ∏ semver    
        
        lang 'coffee'
        
        rgs = ranges "66.70.0"
        inc rgs 1 "66"     ‚ñ∏ 'semver'
        inc rgs 3 "."      ‚ñ∏ 'punct semver'
        inc rgs 4 "70"     ‚ñ∏ 'semver'
        inc rgs 6 "."      ‚ñ∏ 'punct semver'
        inc rgs 7 "0"      ‚ñ∏ 'semver'
    
        rgs = ranges "^0.7.1"
        inc rgs 1 "^"      ‚ñ∏ 'punct semver'
        inc rgs 2 "0"      ‚ñ∏ 'semver'
        inc rgs 4 "7"      ‚ñ∏ 'semver'
        inc rgs 6 "1"      ‚ñ∏ 'semver'
            
        rgs = ranges "^1.0.0-alpha.12"
        inc rgs 2 "1"      ‚ñ∏ 'semver'
        inc rgs 4 "0"      ‚ñ∏ 'semver'
        inc rgs 6 "0"      ‚ñ∏ 'semver'
        
        # lang 'noon'
        
        rgs = ranges ">=6.7.9"
        inc rgs 1 ">"      ‚ñ∏ 'punct semver'
        inc rgs 2 "="      ‚ñ∏ 'punct semver'
        inc rgs 3 "6"      ‚ñ∏ 'semver'
        inc rgs 4 "."      ‚ñ∏ 'punct semver'
        inc rgs 5 "7"      ‚ñ∏ 'semver'
        inc rgs 6 "."      ‚ñ∏ 'punct semver'
        inc rgs 7 "9"      ‚ñ∏ 'semver'        
                
    #       000   0000000  
    #       000  000       
    #       000  0000000   
    # 000   000       000  
    #  0000000   0000000   
    
    ‚ñ∏ js
        
        lang 'js'
        
        rgs = ranges "obj.prop.call(1);"
        inc rgs 1 'obj'        ‚ñ∏ 'obj'
        inc rgs 5 'prop'       ‚ñ∏ 'property'
        inc rgs 10 'call'       ‚ñ∏ 'function call'
        
        rgs = ranges "func = function() {"
        inc rgs 1 'func'       ‚ñ∏ 'function'
        inc rgs 8 'function'   ‚ñ∏ 'keyword function'
        
        rgs = ranges "obj.value = obj.another.value"
        inc rgs 1  "obj"       ‚ñ∏ 'obj'
        inc rgs 5  "value"     ‚ñ∏ 'property'
        inc rgs 13 "obj"       ‚ñ∏ 'obj'
        inc rgs 17 "another"   ‚ñ∏ 'property'
        inc rgs 25 "value"     ‚ñ∏ 'property'
        
        rgs = ranges "a(2);"
        inc rgs 1 'a'          ‚ñ∏ 'function call'
        
        rgs = ranges "//# sourceMappingURL=data:"
        inc rgs 1 "/"          ‚ñ∏ 'punct comment'
        inc rgs 2 "/"          ‚ñ∏ 'punct comment'
        inc rgs 3 "#"          ‚ñ∏ 'comment'
        
    #       ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà
    #       ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà       ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà
    #       ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà ‚ñà ‚ñà‚ñà‚ñà
    # ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà       ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà  ‚ñà‚ñà‚ñà‚ñà
    #  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà   ‚ñà‚ñà‚ñà

    ‚ñ∏ json
    
        lang 'json'
        
        dss = dissect """
            {
              "key": [
                "func.call"
              ]
            }
            """
            
        inc dss[3] 6 'func'   ‚ñ∏ 'string double'
                              
    # 000000000  000   000  000000000  
    #    000      000 000      000     
    #    000       00000       000     
    #    000      000 000      000     
    #    000     000   000     000     
    
    ‚ñ∏ txt
        
        lang 'txt'
        
        rgs = ranges "it's all we'll ever need. we'd never do that!"
        inc rgs 3  "'"         ‚ñ∏ 'punct'
        inc rgs 4  "s"         ‚ñ∏ 'text'
        inc rgs 12 "'"         ‚ñ∏ 'punct'
        inc rgs 29 "'"         ‚ñ∏ 'punct'
        
        rgs = ranges "'it' s, 'we' ll"
        inc rgs 1  "'"         ‚ñ∏ 'punct string single'
        inc rgs 4  "'"         ‚ñ∏ 'punct string single'
        inc rgs 6  "s"         ‚ñ∏ 'text'
        inc rgs 9  "'"         ‚ñ∏ 'punct string single'
        inc rgs 12  "'"        ‚ñ∏ 'punct string single'
        inc rgs 14  "ll"       ‚ñ∏ 'text'
        
        rgs = ranges "['s' 'll' 'd' 't']"
        inc rgs 2  "'"         ‚ñ∏ 'punct string single'
        inc rgs 3  "s"         ‚ñ∏ 'string single'
        inc rgs 4  "'"         ‚ñ∏ 'punct string single'
        inc rgs 6  "'"         ‚ñ∏ 'punct string single'
        inc rgs 9  "'"         ‚ñ∏ 'punct string single'
                    
    # 000   000  000000000  00     00  000    
    # 000   000     000     000   000  000    
    # 000000000     000     000000000  000    
    # 000   000     000     000 0 000  000    
    # 000   000     000     000   000  0000000
    
    ‚ñ∏ html
        
        lang 'html'
        
        rgs = ranges "</div>" 
        inc rgs 1 "<"    ‚ñ∏ 'punct keyword'
        inc rgs 2 "/"    ‚ñ∏ 'punct keyword'
        inc rgs 3 "div"  ‚ñ∏ 'keyword'
        inc rgs 6 ">"    ‚ñ∏ 'punct keyword'
    
        rgs = ranges "<div>" 
        inc rgs 1 "<"    ‚ñ∏ 'punct keyword'
        inc rgs 2 "div"  ‚ñ∏ 'keyword'
        inc rgs 5 ">"    ‚ñ∏ 'punct keyword'  
        
    #  0000000   0000000   0000000  
    # 000       000       000       
    # 000       0000000   0000000   
    # 000            000       000  
    #  0000000  0000000   0000000   
    
    ‚ñ∏ css
        
        lang 'css'
        
        rgs = ranges "0.5" 
        inc rgs 1 "0"      ‚ñ∏ 'number float'
        inc rgs 2 "."      ‚ñ∏ 'punct number float'
        inc rgs 3 "5"      ‚ñ∏ 'number float'

    ‚ñ∏ styl
        
        lang 'styl'
        
        rgs = ranges '   src    url("../font/NF.woff")'
        inc rgs 14 '('      ‚ñ∏ 'punct minor'
        inc rgs 15 '"'      ‚ñ∏ 'punct string double'
        inc rgs 16 '.'      ‚ñ∏ 'string double'
        inc rgs 26 '.'      ‚ñ∏ 'string double'
        inc rgs 27 'woff'   ‚ñ∏ 'string double'
        inc rgs 31 '"'      ‚ñ∏ 'punct string double'
        # log rgs
        
    #  0000000  00000000   00000000 
    # 000       000   000  000   000
    # 000       00000000   00000000 
    # 000       000        000      
    #  0000000  000        000      
    
    ‚ñ∏ cpp
        
        lang 'cpp'
        
        rgs = ranges "#include"      
        inc rgs 1 "#"              ‚ñ∏ 'punct define'
        inc rgs 2 "include"        ‚ñ∏ 'define'
    
        rgs = ranges "#if"            
        inc rgs 1 "#"              ‚ñ∏ 'punct define'
        inc rgs 2 "if"             ‚ñ∏ 'define'
    
        rgs = ranges "#  if"            
        inc rgs 1 "#"              ‚ñ∏ 'punct define'
        inc rgs 4 "if"             ‚ñ∏ 'define'
            
        rgs = ranges "if (true) {} else {}"    
        inc rgs 1 "if"             ‚ñ∏ 'keyword'
        inc rgs 5 "true"           ‚ñ∏ 'keyword'
        inc rgs 14 "else"          ‚ñ∏ 'keyword'
            
        rgs = ranges "1.0f"
        inc rgs 1 "1"              ‚ñ∏ 'number float'
        inc rgs 2 "."              ‚ñ∏ 'punct number float'
        inc rgs 3 "0f"             ‚ñ∏ 'number float'
    
        rgs = ranges "0.0000f"
        inc rgs 3 "0000f"          ‚ñ∏ 'number float'
        
        rgs = ranges "obj.value = obj.another.value;"
        inc rgs 1  "obj"           ‚ñ∏ 'obj'
        inc rgs 5  "value"         ‚ñ∏ 'property'
        inc rgs 13 "obj"           ‚ñ∏ 'obj'
        inc rgs 17 "another"       ‚ñ∏ 'property'
        inc rgs 25 "value"         ‚ñ∏ 'property'
        
        rgs = ranges "Cast<targ>"
        inc rgs 5 '<'              ‚ñ∏ 'punct template'
        inc rgs 6 'targ'           ‚ñ∏ 'template'
        inc rgs 10 '>'              ‚ñ∏ 'punct template'
        
        rgs = ranges "TMap<FGrid, FRoute>"
        inc rgs 1 'TMap'           ‚ñ∏ 'keyword type'
        inc rgs 5 '<'              ‚ñ∏ 'punct template'
        inc rgs 6 'FGrid'          ‚ñ∏ 'template'
        inc rgs 11 ','             ‚ñ∏ 'punct template'
        inc rgs 13 'FRoute'        ‚ñ∏ 'template'
        inc rgs 19 '>'             ‚ñ∏ 'punct template'
        
    
    # 00     00  00     00  
    # 000   000  000   000  
    # 000000000  000000000  
    # 000 0 000  000 0 000  
    # 000   000  000   000  
    
    ‚ñ∏ mm
             
        lang 'mm'
             
        rgs = ranges "@import"      
        inc rgs 1 "@"              ‚ñ∏ 'punct'
        inc rgs 2 "import"         ‚ñ∏ 'define'
    
        rgs = ranges "@implementation"            
        inc rgs 1 "@"              ‚ñ∏ 'punct'
        inc rgs 2 "implementation" ‚ñ∏ 'define'
    
        rgs = ranges "@interface"            
        inc rgs 1 "@"              ‚ñ∏ 'punct'
        inc rgs 2 "interface"      ‚ñ∏ 'define'
    
        rgs = ranges "@synthesize"            
        inc rgs 1 "@"              ‚ñ∏ 'punct'
        inc rgs 2 "synthesize"     ‚ñ∏ 'define'
    
        rgs = ranges "@property"            
        inc rgs 1 "@"              ‚ñ∏ 'punct'
        inc rgs 2 "property"       ‚ñ∏ 'define'
    
        ‚ñ∏ NSString
                 
            rgs = ranges '@"X"'            
            inc rgs 1 "@"        ‚ñ∏ 'punct'
            inc rgs 2 '"'        ‚ñ∏ 'punct string double'
            inc rgs 3 'X'        ‚ñ∏ 'string double'
            inc rgs 4 '"'        ‚ñ∏ 'punct string double'
                 
            rgs = ranges '@"%@"'
            inc rgs 1 "@"        ‚ñ∏ 'punct'
            inc rgs 2 '"'        ‚ñ∏ 'punct string double'
            inc rgs 3 '%'        ‚ñ∏ 'string double'
            inc rgs 4 '@'        ‚ñ∏ 'string double'
            inc rgs 5 '"'        ‚ñ∏ 'punct string double'
        
    #  0000000  000   000  
    # 000       000   000  
    # 0000000   000000000  
    #      000  000   000  
    # 0000000   000   000  
    
    ‚ñ∏ sh
     
        lang 'sh'
         
        rgs = ranges "dir/path/with/dashes/file.txt"
        # inc rgs 1 'dir'        ‚ñ∏ 'text dir'
        # inc rgs 5 'path'       ‚ñ∏ 'text dir'
        # inc rgs 10 'with'      ‚ñ∏ 'text dir'
        # inc rgs 15 'dashes'    ‚ñ∏ 'text dir'
         
        rgs = ranges "prg --arg1 -arg2"
        inc rgs 5 '-'          ‚ñ∏ 'punct argument'
        inc rgs 6 '-'          ‚ñ∏ 'punct argument'
        inc rgs 7 'arg1'       ‚ñ∏ 'argument'
        inc rgs 12 '-'         ‚ñ∏ 'punct argument'
        inc rgs 13 'arg2'      ‚ñ∏ 'argument'
         
        rgs = ranges "cd ~"
        inc rgs 4 '~'          ‚ñ∏ 'text dir'
     
        rgs = ranges "~/home"
        inc rgs 1 '~'          ‚ñ∏ 'text dir'
        # inc rgs 2 '/'          ‚ñ∏ 'punct dir'
        inc rgs 3 'home'       ‚ñ∏ 'text file'
         
    # 000       0000000    0000000   
    # 000      000   000  000        
    # 000      000   000  000  0000  
    # 000      000   000  000   000  
    # 0000000   0000000    0000000   
     
    ‚ñ∏ log
     
        lang 'log'
         
        rgs = ranges "http://domain.com"
        inc rgs 1 'http'           ‚ñ∏ 'url protocol'
        inc rgs 5 ':'              ‚ñ∏ 'punct url'
        inc rgs 6 '/'              ‚ñ∏ 'punct url'
        inc rgs 7 '/'              ‚ñ∏ 'punct url'
        inc rgs 8 'domain'         ‚ñ∏ 'url domain'
        inc rgs 14 '.'             ‚ñ∏ 'punct url tld'
        inc rgs 15 'com'           ‚ñ∏ 'url tld'
         
        rgs = ranges "file.coffee"
        # inc rgs 1 'file'           ‚ñ∏ 'file_coffee'
        # inc rgs 5 '.'              ‚ñ∏ 'file_punct_coffee'
        # inc rgs 6 'coffee'         ‚ñ∏ 'file_ext_coffee'
     
        rgs = ranges "/some/path"
        # inc rgs 2 'some'           ‚ñ∏ 'text dir'
        # inc rgs 6 '/'              ‚ñ∏ 'punct dir'
     
        rgs = ranges "key: value"
        inc rgs 1 'key'            ‚ñ∏ 'dictionary key'
        inc rgs 4 ':'              ‚ñ∏ 'punct dictionary'
        
    # 00     00  0000000    
    # 000   000  000   000  
    # 000000000  000   000  
    # 000 0 000  000   000  
    # 000   000  0000000    
    
    ‚ñ∏ md
        
        lang 'md'
        
        rgs = ranges "**bold**"
        inc rgs 1 '*'          ‚ñ∏ 'punct bold'
        inc rgs 2 '*'          ‚ñ∏ 'punct bold'
        inc rgs 3 'bold'       ‚ñ∏ 'text bold'
        inc rgs 7 '*'          ‚ñ∏ 'punct bold'
        inc rgs 8 '*'          ‚ñ∏ 'punct bold'
        
        rgs = ranges ",**b**,"
        inc rgs 2 '*'          ‚ñ∏ 'punct bold'
        inc rgs 4 'b'          ‚ñ∏ 'text bold'
        inc rgs 5 '*'          ‚ñ∏ 'punct bold'
                
        rgs = ranges "*it lic*"
        inc rgs 1 '*'          ‚ñ∏ 'punct italic'
        inc rgs 2 'it'         ‚ñ∏ 'text italic'
        inc rgs 5 'lic'        ‚ñ∏ 'text italic'
        inc rgs 8 '*'          ‚ñ∏ 'punct italic'
        
        rgs = ranges "*italic*"
        inc rgs 1 '*'          ‚ñ∏ 'punct italic'
        inc rgs 2 'italic'     ‚ñ∏ 'text italic'
        inc rgs 8 '*'          ‚ñ∏ 'punct italic'
     
        rgs = ranges "*`italic code`*"
        inc rgs 1 '*'          ‚ñ∏ 'punct italic'
        inc rgs 2 '`'          ‚ñ∏ 'punct italic code'
        inc rgs 3 'italic'     ‚ñ∏ 'text italic code'
        inc rgs 10 'code'       ‚ñ∏ 'text italic code'
        inc rgs 15 '*'         ‚ñ∏ 'punct italic'
        
        rgs = ranges "it's good"
        inc rgs 1 'it'         ‚ñ∏ 'text'
        inc rgs 3 "'"          ‚ñ∏ 'punct'
        inc rgs 4 's'          ‚ñ∏ 'text'
        
        rgs = ranges "if is empty in then"
        inc rgs 1  'if'        ‚ñ∏ 'text'
        inc rgs 4  'is'        ‚ñ∏ 'text'
        inc rgs 7  'empty'     ‚ñ∏ 'text'
        inc rgs 13 'in'        ‚ñ∏ 'text'
        inc rgs 16 'then'      ‚ñ∏ 'text'
    
        rgs = ranges 'text files. bla'
        inc rgs 1  'text'  ‚ñ∏ 'text'
        inc rgs 11 '.'    ‚ñ∏ 'punct'
        
        rgs = ranges '..bla'
        inc rgs 1  '.'     ‚ñ∏ 'punct'
        inc rgs 2  '.'     ‚ñ∏ 'punct'
        
        rgs = ranges '```coffeescript'
        inc rgs 1 '`'      ‚ñ∏ 'punct code triple'
        inc rgs 4 'coffeescript' ‚ñ∏ 'comment'
            
    ‚ñ∏ md2
        
        lang 'md'
        
        rgs = ranges "- li"
        # inc rgs 1 '-'      ‚ñ∏ 'punct li1 marker'
        # inc rgs 3 'li'     ‚ñ∏ 'text li1'
    
        rgs = ranges "    - **bold**"
        # inc rgs 5 '-'      ‚ñ∏ 'punct li2 marker'
        # inc rgs 9 'bold'   ‚ñ∏ 'text li2 bold'
        
        rgs = ranges "        - **bold**"
        # inc rgs 9 '-'      ‚ñ∏ 'punct li3 marker'
        # inc rgs 13 'bold'  ‚ñ∏ 'text li3 bold'
    
        rgs = ranges "        * **bold**"
        # inc rgs 9 '*'      ‚ñ∏ 'punct li3 marker'
        # inc rgs 13 'bold'  ‚ñ∏ 'text li3 bold'
    
        dss = dissect """
            - li1
            text
            """
        # inc dss[1] 1  '-'    ‚ñ∏ 'punct li1 marker'
        inc dss[2] 1  'text' ‚ñ∏ 'text'
    
        dss = dissect """
            # h1
            ## h2
            ### h3
            #### h4
            ##### h5
            """
        # inc dss[1] 1  "#"    ‚ñ∏ 'punct h1'
        # inc dss[1] 3  "h1"   ‚ñ∏ 'text h1'
        # inc dss[2] 1  "#"    ‚ñ∏ 'punct h2'
        # inc dss[2] 4  "h2"   ‚ñ∏ 'text h2'
        # inc dss[3] 1  "#"    ‚ñ∏ 'punct h3'
        # inc dss[3] 5  "h3"   ‚ñ∏ 'text h3'
        # inc dss[4] 1  "#"    ‚ñ∏ 'punct h4'
        # inc dss[4] 6  "h4"   ‚ñ∏ 'text h4'
        # inc dss[5] 1  "#"    ‚ñ∏ 'punct h5'
        # inc dss[5] 7  "h5"   ‚ñ∏ 'text h5'
    
        dss = dissect '```js\n```'
        inc dss[1] 1 '`' ‚ñ∏ 'punct code triple'
        
        dss = dissect """
            abc
                def    hello number 0.123
            - num 0.2 
            """

        inc dss[2] 25 '0'   ‚ñ∏ 'number float'
        inc dss[2] 26 '.'   ‚ñ∏ 'punct number float'
        inc dss[2] 27 '123' ‚ñ∏ 'number float'
        
        inc dss[3] 7 '0'    ‚ñ∏ 'number float' 
        inc dss[3] 8 '.'    ‚ñ∏ 'punct number float' 
        inc dss[3] 9 '2'    ‚ñ∏ 'number float' 
        
        dss = dissect """
                ugga
                    - fix me!
                """
        # inc dss[2] 5 '-' ‚ñ∏ 'punct li2 marker'
        
        dss = dissect """
                ugga
                     - fix me!
                """
        # inc dss[2] 6 '-' ‚ñ∏ 'punct li2 marker'

        dss = dissect """
                ugga
                      - fix me!
                """
        # inc dss[2] 7 '-' ‚ñ∏ 'punct li2 marker'
        
    # 000   000  000   000  000   0000000   0000000   0000000    00000000  
    # 000   000  0000  000  000  000       000   000  000   000  000       
    # 000   000  000 0 000  000  000       000   000  000   000  0000000   
    # 000   000  000  0000  000  000       000   000  000   000  000       
    #  0000000   000   000  000   0000000   0000000   0000000    00000000  
    
    #‚ñ∏ unicode
    #    
    #    rgs = ranges "üåà"
    #    inc rgs 0 'üåà' ‚ñ∏  'text unicode'
    #    
    #    rgs[0] ‚ñ∏ { start:0 length:2 match:'üåà' turd: 'üåà' clss: 'text unicode' }
    #    
    #    rgs = ranges "üåàüå±"
    #    inc rgs 0 'üåà' ‚ñ∏ 'text unicode'
    #    inc rgs 2 'üå±' ‚ñ∏ 'text unicode'
    #      
    #    rgs = ranges "üôÇlolüòÄ"
    #    inc rgs 0 'üôÇ'   ‚ñ∏   'text unicode'
    #    inc rgs 2 'lol'  ‚ñ∏   'text'
    #    inc rgs 5 'üòÄ'    ‚ñ∏  'text unicode'
    #    rgs = ranges "a‚ûúb"
    #    inc rgs 1 '‚ûú' ‚ñ∏ 'punct keyword'
    #    rgs = ranges '‚îå‚îÄ‚î¨‚îÄ‚îê'
    #    inc rgs 0 '‚îå' ‚ñ∏ 'text unicode'
    #    inc rgs 1 '‚îÄ' ‚ñ∏ 'text unicode'
    #    inc rgs 2 '‚î¨' ‚ñ∏ 'text unicode'
    #    inc rgs 3 '‚îÄ' ‚ñ∏ 'text unicode'
    #    inc rgs 4 '‚îê' ‚ñ∏ 'text unicode'
    #    rgs = ranges "üêÄüêÅüêÇüêÉüêÑüêÖüêÜüêáüêàüêâüêäüêãüêåüêçüêéüêèüêêüêëüêíüêìüêîüêïüêñüêóüêòüêôüêöüêõüêúüêùüêûüêüüê†üê°üê¢üê£üê§üê•"
    #    inc rgs 0  'üêÄ' ‚ñ∏ 'text unicode'
    #    inc rgs 24 'üêå' ‚ñ∏ 'text unicode'
    #  
    #    rgs = ranges "'üîß' bla:1"
    #    inc rgs 5 'bla' ‚ñ∏ 'dictionary key'
    #      
    #    rgs = ranges "icon: 'üîß' bla:1"
    #    inc rgs 11 'bla' ‚ñ∏ 'dictionary key'
        