###
00     00   0000000   0000000    00000000
000   000  000   000  000   000  000     
000000000  000   000  000   000  0000000 
000 0 000  000   000  000   000  000     
000   000   0000000   0000000    00000000

    the class stores modes per editor state
    the objects handle input and text insertion

    vimple   simple vi
    salter   ascii-header 
    uniko    unicode drawing
    unype    unicode type writer
    record   

###

function mode

    @active: {} # maps editor state names to active mode instances
    @modes: {}  # maps mode names to mode subclasses

    @: @name -> # log "mode: #{@name}"
    
    @names: -> Object.keys mode.modes

    #  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    # â–ˆâ–ˆâ–ˆ          â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   
    # â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆ   
    #      â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   
    # â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   
    
    @start: state name ->
    
        â® if @isActive state name
        
        log "mode.start #{name}"
        
        @active[state.name] ?= []
        @active[state.name].push new mode.modes[name]
        
        log "mode.start" @active[state.name].map((m) -> m.name)
            
    @stop: state name ->
        
        log "mode.stop #{name}"
        
        @active[state.name].splice @active[state.name].indexOf(@get(name)) 1
        
        log "mode.stop" @active[state.name].map((m) -> m.name)

    @toggle: state name ->
        
        if @isActive state name
            @stop state name
        else
            @start state name
        
    #  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    # â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ          â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ     
    # â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ          â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
    # â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ          â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     
    # â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ      â–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    
    @isActive: state name -> valid @get(state name)
        
    @get: state name ->
        
        for m in @active[state.name]
            â® m if m.name == name
            

    # 000  000   000   0000000  00000000  00000000   000000000  
    # 000  0000  000  000       000       000   000     000     
    # 000  000 0 000  0000000   0000000   0000000       000     
    # 000  000  0000       000  000       000   000     000     
    # 000  000   000  0000000   00000000  000   000     000     
    
    @insert: state text ->
        
        # log "@mode.insert #{text}"
        
        for mode in @active[state.name]
            # log "active #{mode.name}"
            if mode.insert is func
                # log "and func #{mode.name}"
                text = mode.insert text
        
        text
            
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ     â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆ     
#  â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
#    â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ â–ˆ â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ        â–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆ     
#     â–ˆ      â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

function vimple extends mode
    
    @: -> super 'vimple'

#  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
# â–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ         â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ         â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  
#      â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ         â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ
# â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ

function salter extends mode

    @: -> super 'salter'

# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ â–ˆ â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ
#  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 

function uniko extends mode

    @: -> super 'uniko'
    
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ     
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ â–ˆ â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
# â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ        â–ˆâ–ˆâ–ˆ     
#  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

function unype extends mode

    @map: 
        script:
            A: 'ğ’œ'
            B: 'â„¬'
            C: 'ğ’'
            D: 'ğ’Ÿ'
            E: 'â„°'
            F: 'â„±'
            G: 'ğ’¢'
            H: 'â„‹'
            I: 'â„'
            J: 'ğ’¥'
            K: 'ğ’¦'
            L: 'â„’'
            M: 'â„³'
            N: 'ğ’©'
            O: 'ğ’ª'
            P: 'ğ’«'
            Q: 'ğ’¬'
            R: 'â„›'
            S: 'ğ’®'
            T: 'ğ’¯'
            U: 'ğ’°'
            V: 'ğ’±'
            W: 'ğ’²'
            X: 'ğ’³'
            Y: 'ğ’´'
            Z: 'ğ’µ'
            a: 'ğ’¶'
            b: 'ğ’·'
            c: 'ğ’¸'
            d: 'ğ’¹'
            e: 'â„¯'
            f: 'ğ’»'
            g: 'ğ“°' # 'â„Š'
            h: 'ğ’½'
            i: 'ğ’¾'
            j: 'ğ’¿'
            k: 'ğ“€'
            l: 'ğ“'
            m: 'ğ“‚'
            n: 'ğ“ƒ'
            o: 'â„´'
            p: 'ğ“…'
            q: 'ğ“†'
            r: 'ğ“‡'
            s: 'ğ“ˆ'
            t: 'ğ“‰'
            u: 'ğ“Š'
            v: 'ğ“‹'
            w: 'ğ“Œ'
            x: 'ğ“'
            y: 'ğ“'
            z: 'ğ“'
        script_bold:
            A: 'ğ“'
            B: 'ğ“‘'
            C: 'ğ“’'
            D: 'ğ““'
            E: 'ğ“”'
            F: 'ğ“•'
            G: 'ğ“–'
            H: 'ğ“—'
            I: 'ğ“˜'
            J: 'ğ“™'
            K: 'ğ“š'
            L: 'ğ“›'
            M: 'ğ“œ'
            N: 'ğ“'
            O: 'ğ“'
            P: 'ğ“Ÿ'
            Q: 'ğ“ '
            R: 'ğ“¡'
            S: 'ğ“¢'
            T: 'ğ“£'
            U: 'ğ“¤'
            V: 'ğ“¥'
            W: 'ğ“¦'
            X: 'ğ“§'
            Y: 'ğ“¨'
            Z: 'ğ“©'
            a: 'ğ“ª'
            b: 'ğ“«'
            c: 'ğ“¬'
            d: 'ğ“­'
            e: 'ğ“®'
            f: 'ğ“¯'
            g: 'ğ“°'
            h: 'ğ“±'
            i: 'ğ“²'
            j: 'ğ“³'
            k: 'ğ“´'
            l: 'ğ“µ'
            m: 'ğ“¶'
            n: 'ğ“·'
            o: 'ğ“¸'
            p: 'ğ“¹'
            q: 'ğ“º'
            r: 'ğ“»'
            s: 'ğ“¼'
            t: 'ğ“½'
            u: 'ğ“¾'
            v: 'ğ“¿'
            w: 'ğ”€'
            x: 'ğ”'
            y: 'ğ”‚'
            z: 'ğ”ƒ'
        double: 
            A: 'ğ”¸'
            B: 'ğ”¹'
            C: 'â„‚'
            D: 'ğ”»'
            E: 'ğ”¼'
            F: 'ğ”½'
            G: 'ğ”¾'
            H: 'â„'
            I: 'ğ•€'
            J: 'ğ•'
            K: 'ğ•‚'
            L: 'ğ•ƒ'
            M: 'ğ•„'
            N: 'â„•'
            O: 'ğ•†'
            P: 'â„™'
            Q: 'â„š'
            R: 'â„'
            S: 'ğ•Š'
            T: 'ğ•‹'
            U: 'ğ•Œ'
            V: 'ğ•'
            W: 'ğ•'
            X: 'ğ•'
            Y: 'ğ•'
            Z: 'â„¤'
            a: 'ğ•’'
            b: 'ğ•“'
            c: 'ğ•”'
            d: 'ğ••'
            e: 'ğ•–'
            f: 'ğ•—'
            g: 'ğ•˜'
            h: 'ğ•™'
            i: 'ğ•š'
            j: 'ğ•›'
            k: 'ğ•œ'
            l: 'ğ•'
            m: 'ğ•'
            n: 'ğ•Ÿ'
            o: 'ğ• '
            p: 'ğ•¡'
            q: 'ğ•¢'
            r: 'ğ•£'
            s: 'ğ•¤'
            t: 'ğ•¥'
            u: 'ğ•¦'
            v: 'ğ•§'
            w: 'ğ•¨'
            x: 'ğ•©'
            y: 'ğ•ª'
            z: 'ğ•«'
            0: 'ğŸ˜'
            1: 'ğŸ™'
            2: 'ğŸš'
            3: 'ğŸ›'
            4: 'ğŸœ'
            5: 'ğŸ'
            6: 'ğŸ'
            7: 'ğŸŸ'
            8: 'ğŸ '
            9: 'ğŸ¡'
        italic:
            A: 'ğ´'
            B: 'ğµ'
            C: 'ğ¶'
            D: 'ğ·'
            E: 'ğ¸'
            F: 'ğ¹'
            G: 'ğº'
            H: 'ğ»'
            I: 'ğ¼'
            J: 'ğ½'
            K: 'ğ¾'
            L: 'ğ¿'
            M: 'ğ‘€'
            N: 'ğ‘'
            O: 'ğ‘‚'
            P: 'ğ‘ƒ'
            Q: 'ğ‘„'
            R: 'ğ‘…'
            S: 'ğ‘†'
            T: 'ğ‘‡'
            U: 'ğ‘ˆ'
            V: 'ğ‘‰'
            W: 'ğ‘Š'
            X: 'ğ‘‹'
            Y: 'ğ‘Œ'
            Z: 'ğ‘'
            a: 'ğ‘'
            b: 'ğ‘'
            c: 'ğ‘'
            d: 'ğ‘‘'
            e: 'ğ‘’'
            f: 'ğ‘“'
            g: 'ğ‘”'
            h: 'â„'
            i: 'ğ‘–'
            j: 'ğ‘—'
            k: 'ğ‘˜'
            l: 'ğ‘™'
            m: 'ğ‘š'
            n: 'ğ‘›'
            o: 'ğ‘œ'
            p: 'ğ‘'
            q: 'ğ‘'
            r: 'ğ‘Ÿ'
            s: 'ğ‘ '
            t: 'ğ‘¡'
            u: 'ğ‘¢'
            v: 'ğ‘£'
            w: 'ğ‘¤'
            x: 'ğ‘¥'
            y: 'ğ‘¦'
            z: 'ğ‘§'
            0: 'ğŸ' # just a copy of bold numbers
            1: 'ğŸ'
            2: 'ğŸ'
            3: 'ğŸ‘'
            4: 'ğŸ’'
            5: 'ğŸ“'
            6: 'ğŸ”'
            7: 'ğŸ•'
            8: 'ğŸ–'
            9: 'ğŸ—'
        bold:
            A: 'ğ€'
            B: 'ğ'
            C: 'ğ‚'
            D: 'ğƒ'
            E: 'ğ„'
            F: 'ğ…'
            G: 'ğ†'
            H: 'ğ‡'
            I: 'ğˆ'
            J: 'ğ‰'
            K: 'ğŠ'
            L: 'ğ‹'
            M: 'ğŒ'
            N: 'ğ'
            O: 'ğ'
            P: 'ğ'
            Q: 'ğ'
            R: 'ğ‘'
            S: 'ğ’'
            T: 'ğ“'
            U: 'ğ”'
            V: 'ğ•'
            W: 'ğ–'
            X: 'ğ—'
            Y: 'ğ˜'
            Z: 'ğ™'
            a: 'ğš'
            b: 'ğ›'
            c: 'ğœ'
            d: 'ğ'
            e: 'ğ'
            f: 'ğŸ'
            g: 'ğ '
            h: 'ğ¡'
            i: 'ğ¢'
            j: 'ğ£'
            k: 'ğ¤'
            l: 'ğ¥'
            m: 'ğ¦'
            n: 'ğ§'
            o: 'ğ¨'
            p: 'ğ©'
            q: 'ğª'
            r: 'ğ«'
            s: 'ğ¬'
            t: 'ğ­'
            u: 'ğ®'
            v: 'ğ¯'
            w: 'ğ°'
            x: 'ğ±'
            y: 'ğ²'
            z: 'ğ³'
            0: 'ğŸ'
            1: 'ğŸ'
            2: 'ğŸ'
            3: 'ğŸ‘'
            4: 'ğŸ’'
            5: 'ğŸ“'
            6: 'ğŸ”'
            7: 'ğŸ•'
            8: 'ğŸ–'
            9: 'ğŸ—'
        italic_bold:
            A: 'ğ‘¨'
            B: 'ğ‘©'
            C: 'ğ‘ª'
            D: 'ğ‘«'
            E: 'ğ‘¬'
            F: 'ğ‘­'
            G: 'ğ‘®'
            H: 'ğ‘¯'
            I: 'ğ‘°'
            J: 'ğ‘±'
            K: 'ğ‘²'
            L: 'ğ‘³'
            M: 'ğ‘´'
            N: 'ğ‘µ'
            O: 'ğ‘¶'
            P: 'ğ‘·'
            Q: 'ğ‘¸'
            R: 'ğ‘¹'
            S: 'ğ‘º'
            T: 'ğ‘»'
            U: 'ğ‘¼'
            V: 'ğ‘½'
            W: 'ğ‘¾'
            X: 'ğ‘¿'
            Y: 'ğ’€'
            Z: 'ğ’'
            a: 'ğ’‚'
            b: 'ğ’ƒ'
            c: 'ğ’„'
            d: 'ğ’…'
            e: 'ğ’†'
            f: 'ğ’‡'
            g: 'ğ’ˆ'
            h: 'ğ’‰'
            i: 'ğ’Š'
            j: 'ğ’‹'
            k: 'ğ’Œ'
            l: 'ğ’'
            m: 'ğ’'
            n: 'ğ’'
            o: 'ğ’'
            p: 'ğ’‘'
            q: 'ğ’’'
            r: 'ğ’“'
            s: 'ğ’”'
            t: 'ğ’•'
            u: 'ğ’–'
            v: 'ğ’—'
            w: 'ğ’˜'
            x: 'ğ’™'
            y: 'ğ’š'
            z: 'ğ’›'
            0: 'ğŸ' # just a copy of bold numbers
            1: 'ğŸ'
            2: 'ğŸ'
            3: 'ğŸ‘'
            4: 'ğŸ’'
            5: 'ğŸ“'
            6: 'ğŸ”'
            7: 'ğŸ•'
            8: 'ğŸ–'
            9: 'ğŸ—'
        fraktur:
            A: 'ğ”„'
            B: 'ğ”…'
            C: 'â„­'
            D: 'ğ”‡'
            E: 'ğ”ˆ'
            F: 'ğ”‰'
            G: 'ğ”Š'
            H: 'â„Œ'
            I: 'â„‘'
            J: 'ğ”'
            K: 'ğ”'
            L: 'ğ”'
            M: 'ğ”'
            N: 'ğ”‘'
            O: 'ğ”’'
            P: 'ğ”“'
            Q: 'ğ””'
            R: 'â„œ'
            S: 'ğ”–'
            T: 'ğ”—'
            U: 'ğ”˜'
            V: 'ğ”™'
            W: 'ğ”š'
            X: 'ğ”›'
            Y: 'ğ”œ'
            Z: 'â„¨'
            a: 'ğ”'
            b: 'ğ”Ÿ'
            c: 'ğ” '
            d: 'ğ”¡'
            e: 'ğ”¢'
            f: 'ğ”£'
            g: 'ğ”¤'
            h: 'ğ”¥'
            i: 'ğ”¦'
            j: 'ğ”§'
            k: 'ğ”¨'
            l: 'ğ”©'
            m: 'ğ”ª'
            n: 'ğ”«'
            o: 'ğ”¬'
            p: 'ğ”­'
            q: 'ğ”®'
            r: 'ğ”¯'
            s: 'ğ”°'
            t: 'ğ”±'
            u: 'ğ”²'
            v: 'ğ”³'
            w: 'ğ”´'
            x: 'ğ”µ'
            y: 'ğ”¶'
            z: 'ğ”·'
        fraktur_bold:
            A: 'ğ•¬'
            B: 'ğ•­'
            C: 'ğ•®'
            D: 'ğ•¯'
            E: 'ğ•°'
            F: 'ğ•±'
            G: 'ğ•²'
            H: 'ğ•³'
            I: 'ğ•´'
            J: 'ğ•µ'
            K: 'ğ•¶'
            L: 'ğ•·'
            M: 'ğ•¸'
            N: 'ğ•¹'
            O: 'ğ•º'
            P: 'ğ•»'
            Q: 'ğ•¼'
            R: 'ğ•½'
            S: 'ğ•¾'
            T: 'ğ•¿'
            U: 'ğ–€'
            V: 'ğ–'
            W: 'ğ–‚'
            X: 'ğ–ƒ'
            Y: 'ğ–„'
            Z: 'ğ–…'
            a: 'ğ–†'
            b: 'ğ–‡'
            c: 'ğ–ˆ'
            d: 'ğ–‰'
            e: 'ğ–Š'
            f: 'ğ–‹'
            g: 'ğ–Œ'
            h: 'ğ–'
            i: 'ğ–'
            j: 'ğ–'
            k: 'ğ–'
            l: 'ğ–‘'
            m: 'ğ–’'
            n: 'ğ–“'
            o: 'ğ–”'
            p: 'ğ–•'
            q: 'ğ––'
            r: 'ğ–—'
            s: 'ğ–˜'
            t: 'ğ–™'
            u: 'ğ–š'
            v: 'ğ–›'
            w: 'ğ–œ'
            x: 'ğ–'
            y: 'ğ–'
            z: 'ğ–Ÿ'
        sans:
            A: 'ğ– '
            B: 'ğ–¡'
            C: 'ğ–¢'
            D: 'ğ–£'
            E: 'ğ–¤'
            F: 'ğ–¥'
            G: 'ğ–¦'
            H: 'ğ–§'
            I: 'ğ–¨'
            J: 'ğ–©'
            K: 'ğ–ª'
            L: 'ğ–«'
            M: 'ğ–¬'
            N: 'ğ–­'
            O: 'ğ–®'
            P: 'ğ–¯'
            Q: 'ğ–°'
            R: 'ğ–±'
            S: 'ğ–²'
            T: 'ğ–³'
            U: 'ğ–´'
            V: 'ğ–µ'
            W: 'ğ–¶'
            X: 'ğ–·'
            Y: 'ğ–¸'
            Z: 'ğ–¹'
            a: 'ğ–º'
            b: 'ğ–»'
            c: 'ğ–¼'
            d: 'ğ–½'
            e: 'ğ–¾'
            f: 'ğ–¿'
            g: 'ğ—€'
            h: 'ğ—'
            i: 'ğ—‚'
            j: 'ğ—ƒ'
            k: 'ğ—„'
            l: 'ğ—…'
            m: 'ğ—†'
            n: 'ğ—‡'
            o: 'ğ—ˆ'
            p: 'ğ—‰'
            q: 'ğ—Š'
            r: 'ğ—‹'
            s: 'ğ—Œ'
            t: 'ğ—'
            u: 'ğ—'
            v: 'ğ—'
            w: 'ğ—'
            x: 'ğ—‘'
            y: 'ğ—’'
            z: 'ğ—“'
            0: 'ğŸ¢'
            1: 'ğŸ£'
            2: 'ğŸ¤'
            3: 'ğŸ¥'
            4: 'ğŸ¦'
            5: 'ğŸ§'
            6: 'ğŸ¨'
            7: 'ğŸ©'
            8: 'ğŸª'
            9: 'ğŸ«'
        sans_bold:
            A: 'ğ—”'
            B: 'ğ—•'
            C: 'ğ—–'
            D: 'ğ——'
            E: 'ğ—˜'
            F: 'ğ—™'
            G: 'ğ—š'
            H: 'ğ—›'
            I: 'ğ—œ'
            J: 'ğ—'
            K: 'ğ—'
            L: 'ğ—Ÿ'
            M: 'ğ— '
            N: 'ğ—¡'
            O: 'ğ—¢'
            P: 'ğ—£'
            Q: 'ğ—¤'
            R: 'ğ—¥'
            S: 'ğ—¦'
            T: 'ğ—§'
            U: 'ğ—¨'
            V: 'ğ—©'
            W: 'ğ—ª'
            X: 'ğ—«'
            Y: 'ğ—¬'
            Z: 'ğ—­'
            a: 'ğ—®'
            b: 'ğ—¯'
            c: 'ğ—°'
            d: 'ğ—±'
            e: 'ğ—²'
            f: 'ğ—³'
            g: 'ğ—´'
            h: 'ğ—µ'
            i: 'ğ—¶'
            j: 'ğ—·'
            k: 'ğ—¸'
            l: 'ğ—¹'
            m: 'ğ—º'
            n: 'ğ—»'
            o: 'ğ—¼'
            p: 'ğ—½'
            q: 'ğ—¾'
            r: 'ğ—¿'
            s: 'ğ˜€'
            t: 'ğ˜'
            u: 'ğ˜‚'
            v: 'ğ˜ƒ'
            w: 'ğ˜„'
            x: 'ğ˜…'
            y: 'ğ˜†'
            z: 'ğ˜‡'
            0: 'ğŸ¬'
            1: 'ğŸ­'
            2: 'ğŸ®'
            3: 'ğŸ¯'
            4: 'ğŸ°'
            5: 'ğŸ±'
            6: 'ğŸ²'
            7: 'ğŸ³'
            8: 'ğŸ´'
            9: 'ğŸµ'
        sans_italic:            
            A: 'ğ˜ˆ'
            B: 'ğ˜‰'
            C: 'ğ˜Š'
            D: 'ğ˜‹'
            E: 'ğ˜Œ'
            F: 'ğ˜'
            G: 'ğ˜'
            H: 'ğ˜'
            I: 'ğ˜'
            J: 'ğ˜‘'
            K: 'ğ˜’'
            L: 'ğ˜“'
            M: 'ğ˜”'
            N: 'ğ˜•'
            O: 'ğ˜–'
            P: 'ğ˜—'
            Q: 'ğ˜˜'
            R: 'ğ˜™'
            S: 'ğ˜š'
            T: 'ğ˜›'
            U: 'ğ˜œ'
            V: 'ğ˜'
            W: 'ğ˜'
            X: 'ğ˜Ÿ'
            Y: 'ğ˜ '
            Z: 'ğ˜¡'
            a: 'ğ˜¢'
            b: 'ğ˜£'
            c: 'ğ˜¤'
            d: 'ğ˜¥'
            e: 'ğ˜¦'
            f: 'ğ˜§'
            g: 'ğ˜¨'
            h: 'ğ˜©'
            i: 'ğ˜ª'
            j: 'ğ˜«'
            k: 'ğ˜¬'
            l: 'ğ˜­'
            m: 'ğ˜®'
            n: 'ğ˜¯'
            o: 'ğ˜°'
            p: 'ğ˜±'
            q: 'ğ˜²'
            r: 'ğ˜³'
            s: 'ğ˜´'
            t: 'ğ˜µ'
            u: 'ğ˜¶'
            v: 'ğ˜·'
            w: 'ğ˜¸'
            x: 'ğ˜¹'
            y: 'ğ˜º'
            z: 'ğ˜»'
            0: 'ğŸ¢' # just a copy if sans numbers
            1: 'ğŸ£'
            2: 'ğŸ¤'
            3: 'ğŸ¥'
            4: 'ğŸ¦'
            5: 'ğŸ§'
            6: 'ğŸ¨'
            7: 'ğŸ©'
            8: 'ğŸª'
            9: 'ğŸ«'
        sans_italic_bold:
            A: 'ğ˜¼'
            B: 'ğ˜½'
            C: 'ğ˜¾'
            D: 'ğ˜¿'
            E: 'ğ™€'
            F: 'ğ™'
            G: 'ğ™‚'
            H: 'ğ™ƒ'
            I: 'ğ™„'
            J: 'ğ™…'
            K: 'ğ™†'
            L: 'ğ™‡'
            M: 'ğ™ˆ'
            N: 'ğ™‰'
            O: 'ğ™Š'
            P: 'ğ™‹'
            Q: 'ğ™Œ'
            R: 'ğ™'
            S: 'ğ™'
            T: 'ğ™'
            U: 'ğ™'
            V: 'ğ™‘'
            W: 'ğ™’'
            X: 'ğ™“'
            Y: 'ğ™”'
            Z: 'ğ™•'
            a: 'ğ™–'
            b: 'ğ™—'
            c: 'ğ™˜'
            d: 'ğ™™'
            e: 'ğ™š'
            f: 'ğ™›'
            g: 'ğ™œ'
            h: 'ğ™'
            i: 'ğ™'
            j: 'ğ™Ÿ'
            k: 'ğ™ '
            l: 'ğ™¡'
            m: 'ğ™¢'
            n: 'ğ™£'
            o: 'ğ™¤'
            p: 'ğ™¥'
            q: 'ğ™¦'
            r: 'ğ™§'
            s: 'ğ™¨'
            t: 'ğ™©'
            u: 'ğ™ª'
            v: 'ğ™«'
            w: 'ğ™¬'
            x: 'ğ™­'
            y: 'ğ™®'
            z: 'ğ™¯'
            0: 'ğŸ¬' # just a copy of sans_bold numbers
            1: 'ğŸ­'
            2: 'ğŸ®'
            3: 'ğŸ¯'
            4: 'ğŸ°'
            5: 'ğŸ±'
            6: 'ğŸ²'
            7: 'ğŸ³'
            8: 'ğŸ´'
            9: 'ğŸµ'
        mono:
            A: 'ğ™°'
            B: 'ğ™±'
            C: 'ğ™²'
            D: 'ğ™³'
            E: 'ğ™´'
            F: 'ğ™µ'
            G: 'ğ™¶'
            H: 'ğ™·'
            I: 'ğ™¸'
            J: 'ğ™¹'
            K: 'ğ™º'
            L: 'ğ™»'
            M: 'ğ™¼'
            N: 'ğ™½'
            O: 'ğ™¾'
            P: 'ğ™¿'
            Q: 'ğš€'
            R: 'ğš'
            S: 'ğš‚'
            T: 'ğšƒ'
            U: 'ğš„'
            V: 'ğš…'
            W: 'ğš†'
            X: 'ğš‡'
            Y: 'ğšˆ'
            Z: 'ğš‰'
            a: 'ğšŠ'
            b: 'ğš‹'
            c: 'ğšŒ'
            d: 'ğš'
            e: 'ğš'
            f: 'ğš'
            g: 'ğš'
            h: 'ğš‘'
            i: 'ğš’'
            j: 'ğš“'
            k: 'ğš”'
            l: 'ğš•'
            m: 'ğš–'
            n: 'ğš—'
            o: 'ğš˜'
            p: 'ğš™'
            q: 'ğšš'
            r: 'ğš›'
            s: 'ğšœ'
            t: 'ğš'
            u: 'ğš'
            v: 'ğšŸ'
            w: 'ğš '
            x: 'ğš¡'
            y: 'ğš¢'
            z: 'ğš£'
            0: 'ğŸ¶'
            1: 'ğŸ·'
            2: 'ğŸ¸'
            3: 'ğŸ¹'
            4: 'ğŸº'
            5: 'ğŸ»'
            6: 'ğŸ¼'
            7: 'ğŸ½'
            8: 'ğŸ¾'
            9: 'ğŸ¿'
        smallcaps:
            A: 'A'
            B: 'B'
            C: 'C'
            D: 'D'
            E: 'E'
            F: 'F'
            G: 'G'
            H: 'H'
            I: 'I'
            J: 'J'
            K: 'K'
            L: 'L'
            M: 'M'
            N: 'N'
            O: 'O'
            P: 'P'
            Q: 'Q'
            R: 'R'
            S: 'S'
            T: 'T'
            U: 'U'
            V: 'V'
            W: 'W'
            X: 'X'
            Y: 'Y'
            Z: 'Z'
            a: 'á´€'
            b: 'Ê™'
            c: 'á´„'
            d: 'á´…'
            e: 'á´‡'
            f: 'êœ°'
            g: 'É¢'
            h: 'Êœ'
            i: 'Éª'
            j: 'á´Š'
            k: 'á´‹'
            l: 'ÊŸ'
            m: 'á´'
            n: 'É´'
            o: 'á´'
            p: 'á´˜'
            q: 'ê¯'
            r: 'Ê€'
            s: 'êœ±'
            t: 'á´›'
            u: 'á´œ'
            v: 'á´ '
            w: 'á´¡'
            x: 'ğ“'
            y: 'Ê'
            z: 'á´¢'
        fullwidth:
            A: 'ï¼¡'
            B: 'ï¼¢'
            C: 'ï¼£'
            D: 'ï¼¤'
            E: 'ï¼¥'
            F: 'ï¼¦'
            G: 'ï¼§'
            H: 'ï¼¨'
            I: 'ï¼©'
            J: 'ï¼ª'
            K: 'ï¼«'
            L: 'ï¼¬'
            M: 'ï¼­'
            N: 'ï¼®'
            O: 'ï¼¯'
            P: 'ï¼°'
            Q: 'ï¼±'
            R: 'ï¼²'
            S: 'ï¼³'
            T: 'ï¼´'
            U: 'ï¼µ'
            V: 'ï¼¶'
            W: 'ï¼·'
            X: 'ï¼¸'
            Y: 'ï¼¹'
            Z: 'ï¼º'
            a: 'ï½'
            b: 'ï½‚'
            c: 'ï½ƒ'
            d: 'ï½„'
            e: 'ï½…'
            f: 'ï½†'
            g: 'ï½‡'
            h: 'ï½ˆ'
            i: 'ï½‰'
            j: 'ï½Š'
            k: 'ï½‹'
            l: 'ï½Œ'
            m: 'ï½'
            n: 'ï½'
            o: 'ï½'
            p: 'ï½'
            q: 'ï½‘'
            r: 'ï½’'
            s: 'ï½“'
            t: 'ï½”'
            u: 'ï½•'
            v: 'ï½–'
            w: 'ï½—'
            x: 'ï½˜'
            y: 'ï½™'
            z: 'ï½š'
            0: 'ï¼'
            1: 'ï¼‘'
            2: 'ï¼’'
            3: 'ï¼“'
            4: 'ï¼”'
            5: 'ï¼•'
            6: 'ï¼–'
            7: 'ï¼—'
            8: 'ï¼˜'
            9: 'ï¼™'
            "'": "ï¼‡"
            '"': 'ï¼‚'
            '!': 'ï¼'
            '#': 'ï¼ƒ'
            '$': 'ï¼„'
            '%': 'ï¼…'
            '&': 'ï¼†'
            '(': 'ï¼ˆ'
            ')': 'ï¼‰'
            '*': 'ï¼Š'
            '+': 'ï¼‹'
            ',': 'ï¼Œ'
            '-': 'ï¼'
            '.': 'ï¼'
            '/': 'ï¼'
            ':': 'ï¼š'
            ';': 'ï¼›'
            '<': 'ï¼œ'
            '=': 'ï¼'
            '>': 'ï¼'
            '?': 'ï¼Ÿ'
            '@': 'ï¼ '
            '^': 'ï¼¾'
            ' ': 'ã€€'
            
    @: -> super 'unype'
    
    insert: text -> 
    
        log "unype.insert #{text}"
        if repl = unype.map.fullwidth[text]
            text = repl
            
        text
    
function record extends mode

    @: -> super 'record'
    
mode.modes = 
    vimple: vimple
    salter: salter
    uniko:  uniko
    unype:  unype
    record: record
    
export mode
